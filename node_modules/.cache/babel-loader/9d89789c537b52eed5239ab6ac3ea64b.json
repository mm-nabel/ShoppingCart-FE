{"ast":null,"code":"var _jsxFileName = \"D:\\\\Data\\\\Development\\\\React\\\\Project\\\\Frontend\\\\src\\\\components\\\\SearchBar\\\\SearchBar.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport './SearchBar.css';\nimport Product from '../Product/Product';\nimport Category from '../Category/Category';\n\nconst SearchBar = () => {\n  const selector = useSelector(state => state);\n  const location = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [headerText, setHeaderText] = useState(`Results for ${selector.searchValue}`);\n  const selectedCategory = selector.selectedCategory; // const products = selector.searchProducts;\n  // const categories = selector.searchCategories;\n\n  useEffect(() => {\n    fetch(`http://localhost:8090/products/api/v1/search${location.search}`, {\n      method: 'GET'\n    }).then(res => res.json()).then(res => {\n      if (res.products.length === 0) {\n        setHeaderText(`No search result for ${selector.searchValue}`);\n        setCategories([]);\n      }\n\n      const searchVal = location.search.substr(6, location.search.lengh); // dispatch({ type: \"SET_SEARCH_PRODUCTS\", payload: res.products })\n      // dispatch({ type: \"SET_SEARCH_CATEGORIES\", payload: res.categories });\n\n      dispatch({\n        type: \"SET_SEARCH\",\n        payload: searchVal\n      });\n      setProducts(res.products);\n      setCategories(res.categories);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n\n  const addCategory = (categoryId, type) => {\n    switch (type) {\n      case 0:\n        {\n          dispatch({\n            type: \"SET_SEARCH\",\n            payload: \"\"\n          });\n          dispatch({\n            type: \"SET_CATEGORY\",\n            payload: \"\"\n          });\n          history.push('/');\n          break;\n        }\n\n      case 1:\n        {\n          fetch(`http://localhost:8090/products/api/v1/${categoryId}/search${location.search}`, {\n            method: \"GET\"\n          }).then(res => res.json()).then(res => {\n            dispatch({\n              type: \"SET_CATEGORY\",\n              payload: categoryId\n            });\n            setProducts(res);\n          }).catch(err => {\n            console.log(err);\n          });\n          break;\n        }\n\n      default:\n        {\n          console.log(\"DEFAULT CASE\");\n        }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"featured\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"featured-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"page-header-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, headerText))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"category-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Category, {\n    addition: \"searchClass\",\n    category: {\n      name: selector.searchValue,\n      categoryId: 0\n    },\n    fetchMe: () => addCategory(0, 0),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }), categories.map(category => category.categoryId === selectedCategory ? /*#__PURE__*/React.createElement(Category, {\n    addition: \"searchClass\",\n    category: category,\n    key: category.categoryId,\n    fetchMe: () => addCategory(category.categoryId, 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 26\n    }\n  }) : /*#__PURE__*/React.createElement(Category, {\n    category: category,\n    key: category.categoryId,\n    fetchMe: () => addCategory(category.categoryId, 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 26\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, products.map((product, productId) => /*#__PURE__*/React.createElement(Product, {\n    product: product,\n    key: productId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default SearchBar;","map":{"version":3,"sources":["D:/Data/Development/React/Project/Frontend/src/components/SearchBar/SearchBar.js"],"names":["React","useEffect","useState","useSelector","useDispatch","useLocation","useHistory","Product","Category","SearchBar","selector","state","location","history","dispatch","products","setProducts","categories","setCategories","headerText","setHeaderText","searchValue","selectedCategory","fetch","search","method","then","res","json","length","searchVal","substr","lengh","type","payload","catch","error","console","log","addCategory","categoryId","push","err","name","map","category","product","productId"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport './SearchBar.css';\r\nimport Product from '../Product/Product';\r\nimport Category from '../Category/Category';\r\n\r\nconst SearchBar = () => {\r\n    const selector = useSelector(state => state);\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const [products, setProducts] = useState([]);\r\n    const [categories, setCategories] = useState([]);\r\n    const [headerText, setHeaderText] = useState(`Results for ${selector.searchValue}`);\r\n    const selectedCategory = selector.selectedCategory;\r\n    // const products = selector.searchProducts;\r\n    // const categories = selector.searchCategories;\r\n\r\n    useEffect(() => {\r\n        fetch(`http://localhost:8090/products/api/v1/search${location.search}`, {\r\n            method: 'GET'\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                if(res.products.length === 0) {\r\n                    setHeaderText(`No search result for ${selector.searchValue}`);\r\n                    setCategories([]);\r\n                }\r\n                const searchVal = location.search.substr(6, location.search.lengh);\r\n                // dispatch({ type: \"SET_SEARCH_PRODUCTS\", payload: res.products })\r\n                // dispatch({ type: \"SET_SEARCH_CATEGORIES\", payload: res.categories });\r\n                dispatch({ type: \"SET_SEARCH\", payload: searchVal });\r\n                setProducts(res.products);\r\n                setCategories(res.categories);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n    }, []);\r\n\r\n    const addCategory = (categoryId, type) => {\r\n        switch (type) {\r\n            case 0: {\r\n                dispatch({ type: \"SET_SEARCH\", payload: \"\" });\r\n                dispatch({type:\"SET_CATEGORY\", payload:\"\"});\r\n                history.push('/');\r\n                break;\r\n            }\r\n            case 1: {\r\n                fetch(`http://localhost:8090/products/api/v1/${categoryId}/search${location.search}`, {\r\n                    method: \"GET\"\r\n                })\r\n                    .then(res => res.json())\r\n                    .then(res => {\r\n                        dispatch({ type: \"SET_CATEGORY\", payload: categoryId });\r\n                        setProducts(res);\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err);\r\n                    })\r\n                break;\r\n            }\r\n            default: {\r\n                console.log(\"DEFAULT CASE\");\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"search-result\">\r\n            <div className=\"featured\">\r\n                <div className=\"featured-title\">\r\n                    <h1 className=\"page-header-title\">{headerText}</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"category-list\">\r\n                <Category addition=\"searchClass\" category={{ name: selector.searchValue, categoryId: 0 }} fetchMe={() => addCategory(0, 0)} />\r\n                {categories.map(category => (\r\n                    category.categoryId === selectedCategory ?\r\n                        (<Category addition=\"searchClass\" category={category} key={category.categoryId} fetchMe={() => addCategory(category.categoryId, 1)} />)\r\n                        :\r\n                        (<Category category={category} key={category.categoryId} fetchMe={() => addCategory(category.categoryId, 1)} />)\r\n                ))}\r\n            </div>\r\n            <div className=\"product-list\">\r\n                {products.map((product, productId) => (\r\n                    <Product product={product} key={productId} />\r\n                ))\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchBar;"]},"metadata":{},"sourceType":"module"}