{"ast":null,"code":"var _jsxFileName = \"D:\\\\Data\\\\Development\\\\React\\\\Project\\\\Frontend\\\\src\\\\components\\\\Login\\\\Login.js\";\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport jwt from \"jwt-decode\";\nimport \"./Login.css\";\n\nconst Login = () => {\n  const dispatch = useDispatch();\n  const username = useFormInput(\"\");\n  const password = useFormInput(\"\");\n  const history = useHistory(); // const [error, setError] = useState(null);\n\n  const [type, setType] = useState(\"customer\");\n  const [url, setUrl] = useState(\"http://localhost:8090/enduserlogin\");\n\n  let userTypeSelection = event => {\n    let selected = event.target.value;\n\n    switch (selected) {\n      case \"admin\":\n        setUrl(\"http://localhost:8090/adminlogin\");\n        setType(\"admin\");\n        break;\n\n      case \"seller\":\n        setUrl(\"http://localhost:8090/sellerlogin\");\n        setType(\"seller\");\n        break;\n\n      case \"owner\":\n        setUrl(\"http://localhost:8090/bologin\");\n        setType(\"owner\");\n        break;\n\n      default:\n        setUrl(\"http://localhost:8090/enduserlogin\");\n        setType(\"customer\");\n    }\n  };\n\n  const handleLogin = () => {\n    if (password.value.length > 2 && username.value.length > 0) {\n      fetch(url, {\n        method: \"POST\",\n        cache: \"no-cache\",\n        headers: {\n          \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n        },\n        body: JSON.stringify({\n          password: password.value,\n          username: username.value\n        })\n      }).then(res => res.json()).then(res => {\n        const responseJWT = jwt(res.jwt); // console.log(responseJWT);\n        // console.log(res);\n        // const userID = responseJWT.id;\n\n        const username = responseJWT.sub;\n        const expireDate = responseJWT.exp;\n        dispatch({\n          type: \"SET_USER\",\n          value: username\n        });\n        dispatch({\n          type: \"SET_EXPIRATION\",\n          value: expireDate\n        });\n        dispatch({\n          type: \"SET_USER_TYPE\",\n          payload: type\n        });\n        localStorage.setItem(\"shopJWT\", res.jwt);\n\n        switch (type) {\n          case \"admin\":\n            history.push(\"/admin\");\n            break;\n\n          case \"seller\":\n            history.push(\"/seller\");\n            break;\n\n          case \"owner\":\n            history.push(\"bowner\");\n            break;\n\n          default:\n            history.push(\"/\");\n        }\n      }).catch(err => {\n        alert(\"Invalid username and password. Please try again\");\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/logo.png\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, \"Sign-In\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    type: \"text\",\n    className: \"usernameInput\",\n    name: \"username\"\n  }, username, {\n    id: \"username\",\n    placeholder: \"Username\",\n    autoComplete: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    type: \"password\",\n    className: \"passwordInput\"\n  }, password, {\n    autoComplete: \"new-password\",\n    placeholder: \"Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    onChange: userTypeSelection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"customer\",\n    defaultValue: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, \"Customer\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"seller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, \"Seller\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"owner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, \"Brand Owner\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"admin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, \"Admin\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginButton\",\n    onClick: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    className: \"goregister\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"Create account\")))));\n};\n\nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["D:/Data/Development/React/Project/Frontend/src/components/Login/Login.js"],"names":["React","useState","useDispatch","Link","useHistory","jwt","Login","dispatch","username","useFormInput","password","history","type","setType","url","setUrl","userTypeSelection","event","selected","target","value","handleLogin","length","fetch","method","cache","headers","body","JSON","stringify","then","res","json","responseJWT","sub","expireDate","exp","payload","localStorage","setItem","push","catch","err","alert","initialValue","setValue","handleChange","e","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport jwt from \"jwt-decode\";\r\nimport \"./Login.css\";\r\n\r\nconst Login = () => {\r\n  const dispatch = useDispatch();\r\n  const username = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const history = useHistory();\r\n  // const [error, setError] = useState(null);\r\n  const [type, setType] = useState(\"customer\");\r\n  const [url, setUrl] = useState(\"http://localhost:8090/enduserlogin\");\r\n\r\n  let userTypeSelection = (event) => {\r\n    let selected = event.target.value;\r\n    switch (selected) {\r\n      case \"admin\":\r\n        setUrl(\"http://localhost:8090/adminlogin\");\r\n        setType(\"admin\");\r\n        break;\r\n      case \"seller\":\r\n        setUrl(\"http://localhost:8090/sellerlogin\");\r\n        setType(\"seller\");\r\n        break;\r\n      case \"owner\":\r\n        setUrl(\"http://localhost:8090/bologin\");\r\n        setType(\"owner\");\r\n        break;\r\n      default:\r\n        setUrl(\"http://localhost:8090/enduserlogin\");\r\n        setType(\"customer\");\r\n    }\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    if (password.value.length > 2 && username.value.length > 0) {\r\n      fetch(url, {\r\n        method: \"POST\",\r\n        cache: \"no-cache\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: JSON.stringify({\r\n          password: password.value,\r\n          username: username.value,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((res) => {\r\n          const responseJWT = jwt(res.jwt);\r\n          // console.log(responseJWT);\r\n          // console.log(res);\r\n          // const userID = responseJWT.id;\r\n          const username = responseJWT.sub;\r\n          const expireDate = responseJWT.exp;\r\n\r\n          dispatch({ type: \"SET_USER\", value: username });\r\n          dispatch({ type: \"SET_EXPIRATION\", value: expireDate });\r\n          dispatch({type:\"SET_USER_TYPE\", payload: type});\r\n          localStorage.setItem(\"shopJWT\", res.jwt);\r\n\r\n          switch (type) {\r\n            case \"admin\":\r\n              history.push(\"/admin\");\r\n              break;\r\n            case \"seller\":\r\n              history.push(\"/seller\");\r\n              break;\r\n            case \"owner\":\r\n              history.push(\"bowner\");\r\n              break;\r\n            default:\r\n              history.push(\"/\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert(\"Invalid username and password. Please try again\");\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"loginContainer\">\r\n        <div className=\"logo\">\r\n          <Link to=\"/\">\r\n            <img src=\"/img/logo.png\" alt=\"logo\"></img>\r\n          </Link>\r\n        </div>\r\n        <div className=\"signin\">\r\n          <div className=\"title\">Sign-In</div>\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"usernameInput\"\r\n              name=\"username\"\r\n              {...username}\r\n              id=\"username\"\r\n              placeholder=\"Username\"\r\n              autoComplete=\"username\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              type=\"password\"\r\n              className=\"passwordInput\"\r\n              {...password}\r\n              autoComplete=\"new-password\"\r\n              placeholder=\"Password\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <select onChange={userTypeSelection}>\r\n              <option value=\"customer\" defaultValue>\r\n                Customer\r\n              </option>\r\n              <option value=\"seller\">Seller</option>\r\n              <option value=\"owner\">Brand Owner</option>\r\n              <option value=\"admin\">Admin</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"signButton\">\r\n            <div className=\"loginButton\" onClick={handleLogin}>\r\n              Login\r\n            </div>\r\n            <Link to=\"/register\" className=\"goregister\">\r\n              Create account\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useFormInput = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  const handleChange = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n  return {\r\n    value,\r\n    onChange: handleChange,\r\n  };\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}