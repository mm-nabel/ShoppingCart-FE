{"ast":null,"code":"var _jsxFileName = \"D:\\\\Data\\\\Development\\\\React\\\\Project\\\\Frontend\\\\src\\\\components\\\\ShoppingCart\\\\ShoppingCart.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from 'react-redux';\nimport CardItem from \"./CartItem\";\nimport \"./ShoppingCart.css\";\nimport http from \"./../../services/httpService\";\nimport { useHistory } from \"react-router-dom\";\nconst apiEndpoint = \"http://localhost:8090/cartLine/api/v1/\";\nconst userId = 2;\n\nfunction ShoppingCart() {\n  const [productList, setProductList] = useState([]);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    http.get(apiEndpoint + \"getCartItems/\", {\n      headers: http.getJWT()\n    }).then(res => {\n      let data = res === undefined ? [] : res.data;\n      setProductList(data);\n    }, error => {\n      console.log(error.response.status);\n    });\n  }, []);\n  let subTotal = 0,\n      shippingValue = 10,\n      taxValue = 0;\n\n  for (let prod of productList) {\n    subTotal += prod.price * prod.quantity;\n  }\n\n  let editQuantity = (id, action) => {\n    let copyArr = productList.slice();\n    console.log(copyArr[id], userId);\n\n    function editFunc() {\n      http.put(apiEndpoint + \"edit\", {\n        productId: copyArr[id].productId,\n        // userId: userId,\n        quantity: copyArr[id].quantity\n      }, {\n        headers: http.getJWT()\n      });\n    }\n\n    if (action === \"add\") {\n      copyArr[id].quantity += 1;\n      dispatch({\n        type: \"ADD_CART\",\n        payload: 1\n      });\n      editFunc();\n    } else {\n      if (copyArr[id].quantity > 1) {\n        copyArr[id].quantity -= 1;\n        dispatch({\n          type: \"DELETE_CART\",\n          payload: 1\n        });\n        editFunc();\n      } else {\n        console.log(\"delete product\");\n        dispatch({\n          type: \"DELETE_CART\",\n          payload: copyArr[id].quantity\n        });\n        http.delete(apiEndpoint + \"delete\", {\n          headers: http.getJWT(),\n          data: {\n            productId: copyArr[id].productId // userId: userId,\n\n          }\n        });\n        copyArr = copyArr.filter((i, index) => index !== id);\n      }\n    }\n\n    setProductList(copyArr);\n  };\n\n  let deleteItem = id => {\n    let copyArr = productList.slice();\n    http.delete(apiEndpoint + \"delete\", {\n      headers: http.getJWT(),\n      data: {\n        productId: copyArr[id].productId\n      }\n    });\n    copyArr = copyArr.filter((i, index) => index !== id);\n    setProductList(copyArr);\n  };\n\n  let functions = {\n    editQty: editQuantity,\n    deleteItem: deleteItem\n  };\n\n  let proceedCheckout = () => {\n    history.push(\"/checkout\");\n  };\n\n  let continueShopping = () => {\n    history.push(\"/\");\n  };\n\n  let totalValue = subTotal + shippingValue + taxValue;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"cartTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, \" Your cart \"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"cartContinueShop btn btn-primary\",\n    onClick: continueShopping,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, \"Continue Shopping\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }), productList.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"border-0 bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-2 px-3 text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 23\n    }\n  }, \"Product\")), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"border-0 bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-2 text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 23\n    }\n  }, \"Price\")), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"border-0 bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-2 text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 23\n    }\n  }, \"Quantity\")), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"border-0 bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-2 text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 23\n    }\n  }, \"Total\")), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"border-0 bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-2 text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 23\n    }\n  }, \"Remove\")))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, productList.map((item, index) => /*#__PURE__*/React.createElement(CardItem, {\n    key: index,\n    index: index,\n    item: item,\n    fx: functions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, \"Order summary\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-unstyled mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"d-flex justify-content-between py-3 border-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 19\n    }\n  }, \"Order Subtotal \"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }, \"$\", subTotal)), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"d-flex justify-content-between py-3 border-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 19\n    }\n  }, \"Shipping and handling\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, \"$\", shippingValue)), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"d-flex justify-content-between py-3 border-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }, \"$\", taxValue)), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"d-flex justify-content-between py-3 border-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 19\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 19\n    }\n  }, \"$\", totalValue))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary rounded-pill py-2 btn-block\",\n    onClick: proceedCheckout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, \"Procceed to checkout\")))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, \"Your Shopping cart is empty\"));\n}\n\nexport default ShoppingCart;","map":{"version":3,"sources":["D:/Data/Development/React/Project/Frontend/src/components/ShoppingCart/ShoppingCart.js"],"names":["React","useState","useEffect","useDispatch","CardItem","http","useHistory","apiEndpoint","userId","ShoppingCart","productList","setProductList","history","dispatch","get","headers","getJWT","then","res","data","undefined","error","console","log","response","status","subTotal","shippingValue","taxValue","prod","price","quantity","editQuantity","id","action","copyArr","slice","editFunc","put","productId","type","payload","delete","filter","i","index","deleteItem","functions","editQty","proceedCheckout","push","continueShopping","totalValue","length","map","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch } from 'react-redux';\r\nimport CardItem from \"./CartItem\";\r\nimport \"./ShoppingCart.css\";\r\nimport http from \"./../../services/httpService\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst apiEndpoint = \"http://localhost:8090/cartLine/api/v1/\";\r\nconst userId = 2;\r\n\r\nfunction ShoppingCart() {\r\n  const [productList, setProductList] = useState([]);\r\n\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    http\r\n      .get(apiEndpoint + \"getCartItems/\", {\r\n        headers: http.getJWT(),\r\n      })\r\n      .then(\r\n        (res) => {\r\n          let data = res === undefined ? [] : res.data;\r\n          setProductList(data);\r\n        },\r\n        (error) => {\r\n          console.log(error.response.status);\r\n        }\r\n      );\r\n  }, []);\r\n\r\n  let subTotal = 0,\r\n    shippingValue = 10,\r\n    taxValue = 0;\r\n\r\n  for (let prod of productList) {\r\n    subTotal += prod.price * prod.quantity;\r\n  }\r\n\r\n  let editQuantity = (id, action) => {\r\n    let copyArr = productList.slice();\r\n\r\n    console.log(copyArr[id], userId);\r\n\r\n    function editFunc() {\r\n      http.put(\r\n        apiEndpoint + \"edit\",\r\n        {\r\n          productId: copyArr[id].productId,\r\n          // userId: userId,\r\n          quantity: copyArr[id].quantity,\r\n        },\r\n        {\r\n          headers: http.getJWT(),\r\n        }\r\n      );\r\n    }\r\n\r\n    if (action === \"add\") {\r\n      copyArr[id].quantity += 1;\r\n      dispatch({type:\"ADD_CART\", payload: 1});\r\n      editFunc();\r\n    } else {\r\n      if (copyArr[id].quantity > 1) {\r\n        copyArr[id].quantity -= 1;\r\n        dispatch({type:\"DELETE_CART\", payload: 1});\r\n        editFunc();\r\n      } else {\r\n        console.log(\"delete product\");\r\n        dispatch({type:\"DELETE_CART\", payload: copyArr[id].quantity});\r\n        http.delete(apiEndpoint + \"delete\", {\r\n          headers: http.getJWT(),\r\n          data: {\r\n            productId: copyArr[id].productId,\r\n            // userId: userId,\r\n          },\r\n        });\r\n        copyArr = copyArr.filter((i, index) => index !== id);\r\n      }\r\n    }\r\n\r\n    setProductList(copyArr);\r\n  };\r\n\r\n  let deleteItem = (id) => {\r\n    let copyArr = productList.slice();\r\n    http.delete(apiEndpoint + \"delete\", {\r\n      headers: http.getJWT(),\r\n      data: {\r\n        productId: copyArr[id].productId,\r\n      },\r\n    });\r\n    copyArr = copyArr.filter((i, index) => index !== id);\r\n    setProductList(copyArr);\r\n  };\r\n\r\n  let functions = {\r\n    editQty: editQuantity,\r\n    deleteItem: deleteItem,\r\n  };\r\n\r\n  let proceedCheckout = () => {\r\n    history.push(\"/checkout\");\r\n  };\r\n\r\n  let continueShopping = () => {\r\n    history.push(\"/\");\r\n  };\r\n\r\n  let totalValue = subTotal + shippingValue + taxValue;\r\n\r\n  return (\r\n    <div className=\"container mt20\">\r\n      <h4 className=\"cartTitle\"> Your cart </h4>\r\n      <button\r\n        className=\"cartContinueShop btn btn-primary\"\r\n        onClick={continueShopping}\r\n      >\r\n        Continue Shopping\r\n      </button>\r\n      <hr />\r\n\r\n      {productList.length > 0 ? (\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-8\">\r\n            <div className=\"table-responsive \">\r\n              <table className=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"border-0 bg-light\">\r\n                      <div className=\"p-2 px-3 text-uppercase\">Product</div>\r\n                    </th>\r\n                    <th className=\"border-0 bg-light\">\r\n                      <div className=\"py-2 text-uppercase\">Price</div>\r\n                    </th>\r\n                    <th className=\"border-0 bg-light\">\r\n                      <div className=\"py-2 text-uppercase\">Quantity</div>\r\n                    </th>\r\n                    <th className=\"border-0 bg-light\">\r\n                      <div className=\"py-2 text-uppercase\">Total</div>\r\n                    </th>\r\n                    <th className=\"border-0 bg-light\">\r\n                      <div className=\"py-2 text-uppercase\">Remove</div>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {productList.map((item, index) => (\r\n                    <CardItem\r\n                      key={index}\r\n                      index={index}\r\n                      item={item}\r\n                      fx={functions}\r\n                    ></CardItem>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            <div className=\"bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold\">\r\n              Order summary\r\n            </div>\r\n            <div className=\"p-4\">\r\n              <ul className=\"list-unstyled mb-4\">\r\n                <li className=\"d-flex justify-content-between py-3 border-bottom\">\r\n                  <strong className=\"text-muted\">Order Subtotal </strong>\r\n                  <strong>${subTotal}</strong>\r\n                </li>\r\n                <li className=\"d-flex justify-content-between py-3 border-bottom\">\r\n                  <strong className=\"text-muted\">Shipping and handling</strong>\r\n                  <strong>${shippingValue}</strong>\r\n                </li>\r\n                <li className=\"d-flex justify-content-between py-3 border-bottom\">\r\n                  <strong className=\"text-muted\">Tax</strong>\r\n                  <strong>${taxValue}</strong>\r\n                </li>\r\n                <li className=\"d-flex justify-content-between py-3 border-bottom\">\r\n                  <strong className=\"text-muted\">Total</strong>\r\n                  <h5 className=\"font-weight-bold\">${totalValue}</h5>\r\n                </li>\r\n              </ul>\r\n              <button\r\n                className=\"btn btn-primary rounded-pill py-2 btn-block\"\r\n                onClick={proceedCheckout}\r\n              >\r\n                Procceed to checkout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p>Your Shopping cart is empty</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ShoppingCart;\r\n"]},"metadata":{},"sourceType":"module"}