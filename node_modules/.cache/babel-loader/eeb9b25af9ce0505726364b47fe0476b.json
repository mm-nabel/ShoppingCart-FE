{"ast":null,"code":"var _jsxFileName = \"D:\\\\Data\\\\Development\\\\React\\\\Project\\\\Frontend\\\\src\\\\components\\\\Login\\\\Login.js\";\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport jwt from \"jwt-decode\";\nimport \"./Login.css\";\n\nconst Login = () => {\n  const dispatch = useDispatch();\n  const username = useFormInput(\"\");\n  const password = useFormInput(\"\");\n  const history = useHistory();\n  const [error, setError] = useState(null);\n  const [type, setType] = useState(\"customer\");\n  const [url, setUrl] = useState(\"http://localhost:8090/enduserlogin\");\n\n  let userTypeSelection = event => {\n    let selected = event.target.value;\n\n    switch (selected) {\n      case \"admin\":\n        setUrl(\"http://localhost:8090/adminlogin\");\n        setType(\"admin\");\n        break;\n\n      case \"seller\":\n        setUrl(\"http://localhost:8090/sellerlogin\");\n        setType(\"seller\");\n        break;\n\n      case \"owner\":\n        setUrl(\"http://localhost:8090/bologin\");\n        setType(\"owner\");\n\n      default:\n        setUrl(\"http://localhost:8090/enduserlogin\");\n        setType(\"customer\");\n    }\n  };\n\n  const handleLogin = () => {\n    if (password.value.length > 2 && username.value.length > 0) {\n      fetch(url, {\n        method: \"POST\",\n        cache: \"no-cache\",\n        headers: {\n          \"Content-Type\": \"application/json\" // 'Content-Type': 'application/x-www-form-urlencoded',\n\n        },\n        body: JSON.stringify({\n          password: password.value,\n          username: username.value\n        })\n      }).then(res => res.json()).then(res => {\n        const responseJWT = jwt(res.jwt);\n        console.log(responseJWT);\n        console.log(res);\n        const userID = responseJWT.id;\n        const username = responseJWT.sub;\n        const expireDate = responseJWT.exp;\n        history.push(\"/\");\n        dispatch({\n          type: \"SET_USER\",\n          value: username\n        });\n        dispatch({\n          type: \"SET_EXPIRATION\",\n          value: expireDate\n        });\n        localStorage.setItem(\"shopJWT\", res.jwt);\n      }).catch(err => {\n        setError(err);\n        console.log(\"ERROR: \" + err);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/logo.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \"Sign-In\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    type: \"text\",\n    className: \"usernameInput\",\n    name: \"username\"\n  }, username, {\n    id: \"username\",\n    placeholder: \"Username\",\n    autoComplete: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    type: \"password\",\n    className: \"passwordInput\"\n  }, password, {\n    autoComplete: \"new-password\",\n    placeholder: \"Password\",\n    autoComplete: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    onChange: userTypeSelection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"customer\",\n    defaultValue: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, \"Customer\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"seller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, \"Seller\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"owner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, \"Brand Owner\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"admin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, \"Admin\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginButton\",\n    onClick: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    className: \"goregister\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, \"Create account\")))));\n};\n\nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["D:/Data/Development/React/Project/Frontend/src/components/Login/Login.js"],"names":["React","useState","useDispatch","Link","useHistory","jwt","Login","dispatch","username","useFormInput","password","history","error","setError","type","setType","url","setUrl","userTypeSelection","event","selected","target","value","handleLogin","length","fetch","method","cache","headers","body","JSON","stringify","then","res","json","responseJWT","console","log","userID","id","sub","expireDate","exp","push","localStorage","setItem","catch","err","initialValue","setValue","handleChange","e","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport jwt from \"jwt-decode\";\r\nimport \"./Login.css\";\r\n\r\nconst Login = () => {\r\n  const dispatch = useDispatch();\r\n  const username = useFormInput(\"\");\r\n  const password = useFormInput(\"\");\r\n  const history = useHistory();\r\n  const [error, setError] = useState(null);\r\n  const [type, setType] = useState(\"customer\");\r\n  const [url, setUrl] = useState(\"http://localhost:8090/enduserlogin\");\r\n\r\n  let userTypeSelection = (event) => {\r\n    let selected = event.target.value;\r\n    switch (selected) {\r\n      case \"admin\":\r\n        setUrl(\"http://localhost:8090/adminlogin\");\r\n        setType(\"admin\");\r\n        break;\r\n      case \"seller\":\r\n        setUrl(\"http://localhost:8090/sellerlogin\");\r\n        setType(\"seller\");\r\n        break;\r\n      case \"owner\":\r\n        setUrl(\"http://localhost:8090/bologin\");\r\n        setType(\"owner\");\r\n      default:\r\n        setUrl(\"http://localhost:8090/enduserlogin\");\r\n        setType(\"customer\");\r\n    }\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    if (password.value.length > 2 && username.value.length > 0) {\r\n      fetch(url, {\r\n        method: \"POST\",\r\n        cache: \"no-cache\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: JSON.stringify({\r\n          password: password.value,\r\n          username: username.value,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((res) => {\r\n          const responseJWT = jwt(res.jwt);\r\n          console.log(responseJWT);\r\n          console.log(res);\r\n          const userID = responseJWT.id;\r\n          const username = responseJWT.sub;\r\n          const expireDate = responseJWT.exp;\r\n          history.push(\"/\");\r\n          dispatch({ type: \"SET_USER\", value: username });\r\n          dispatch({ type: \"SET_EXPIRATION\", value: expireDate });\r\n          localStorage.setItem(\"shopJWT\", res.jwt);\r\n        })\r\n        .catch((err) => {\r\n          setError(err);\r\n          console.log(\"ERROR: \" + err);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"loginContainer\">\r\n        <div className=\"logo\">\r\n          <Link to=\"/\">\r\n            <img src=\"/img/logo.png\"></img>\r\n          </Link>\r\n        </div>\r\n        <div className=\"signin\">\r\n          <div className=\"title\">Sign-In</div>\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"usernameInput\"\r\n              name=\"username\"\r\n              {...username}\r\n              id=\"username\"\r\n              placeholder=\"Username\"\r\n              autoComplete=\"username\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <input\r\n              type=\"password\"\r\n              className=\"passwordInput\"\r\n              {...password}\r\n              autoComplete=\"new-password\"\r\n              placeholder=\"Password\"\r\n              autoComplete=\"username\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <select onChange={userTypeSelection}>\r\n              <option value=\"customer\" defaultValue>\r\n                Customer\r\n              </option>\r\n              <option value=\"seller\">Seller</option>\r\n              <option value=\"owner\">Brand Owner</option>\r\n              <option value=\"admin\">Admin</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"signButton\">\r\n            <div className=\"loginButton\" onClick={handleLogin}>\r\n              Login\r\n            </div>\r\n            <Link to=\"/register\" className=\"goregister\">\r\n              Create account\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useFormInput = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  const handleChange = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n  return {\r\n    value,\r\n    onChange: handleChange,\r\n  };\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}